<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <style>
  @media print {
    *,
    *:before,
    *:after {
      background: transparent !important;
      color: #000 !important;
      box-shadow: none !important;
      text-shadow: none !important;
    }
  
    a,
    a:visited {
      text-decoration: underline;
    }
  
    a[href]:after {
      content: " (" attr(href) ")";
    }
  
    abbr[title]:after {
      content: " (" attr(title) ")";
    }
  
    a[href^="#"]:after,
    a[href^="javascript:"]:after {
      content: "";
    }
  
    pre,
    blockquote {
      border: 1px solid #999;
      page-break-inside: avoid;
    }
  
    thead {
      display: table-header-group;
    }
  
    tr,
    img {
      page-break-inside: avoid;
    }
  
    img {
      max-width: 100% !important;
    }
  
    p,
    h2,
    h3 {
      orphans: 3;
      widows: 3;
    }
  
    h2,
    h3 {
      page-break-after: avoid;
    }
  }
  
  html {
    font-size: 12px;
  }
  
  @media screen and (min-width: 32rem) and (max-width: 48rem) {
    html {
      font-size: 15px;
    }
  }
  
  @media screen and (min-width: 48rem) {
    html {
      font-size: 16px;
    }
  }
  
  body {
    line-height: 1.85;
  }
  
  p,
  .splendor-p {
    font-size: 1rem;
    margin-bottom: 1.3rem;
  }
  
  h1,
  .splendor-h1,
  h2,
  .splendor-h2,
  h3,
  .splendor-h3,
  h4,
  .splendor-h4 {
    margin: 1.414rem 0 .5rem;
    font-weight: inherit;
    line-height: 1.42;
  }
  
  h1,
  .splendor-h1 {
    margin-top: 0;
    font-size: 3.998rem;
  }
  
  h2,
  .splendor-h2 {
    font-size: 2.827rem;
  }
  
  h3,
  .splendor-h3 {
    font-size: 1.999rem;
  }
  
  h4,
  .splendor-h4 {
    font-size: 1.414rem;
  }
  
  h5,
  .splendor-h5 {
    font-size: 1.121rem;
  }
  
  h6,
  .splendor-h6 {
    font-size: .88rem;
  }
  
  small,
  .splendor-small {
    font-size: .707em;
  }
  
  /* https://github.com/mrmrs/fluidity */
  
  img,
  canvas,
  iframe,
  video,
  svg,
  select,
  textarea {
    max-width: 100%;
  }
  
  @import url(http://fonts.googleapis.com/css?family=Merriweather:300italic,300);
  
  html {
    font-size: 18px;
    max-width: 100%;
  }
  
  body {
    color: #444;
    font-family: 'Merriweather', Georgia, serif;
    margin: 0;
    max-width: 100%;
  }
  
  /* === A bit of a gross hack so we can have bleeding divs/blockquotes. */
  
  p,
  *:not(div):not(img):not(body):not(html):not(li):not(blockquote):not(p) {
    margin: 1rem auto 1rem;
    max-width: 36rem;
    padding: .25rem;
  }
  
  div {
    width: 100%;
  }
  
  div img {
    width: 100%;
  }
  
  blockquote p {
    font-size: 1.5rem;
    font-style: italic;
    margin: 1rem auto 1rem;
    max-width: 48rem;
  }
  
  li {
    margin-left: 2rem;
  }
  
  /* Counteract the specificity of the gross *:not() chain. */
  
  h1 {
    padding: 2rem 0 !important;
  }
  
  /*  === End gross hack */
  
  p {
    color: #555;
    height: auto;
    line-height: 1.45;
  }
  
  pre,
  code {
    font-family: Menlo, Monaco, "Courier New", monospace;
  }
  
  pre {
    background-color: #fafafa;
    font-size: .8rem;
    overflow-x: scroll;
    padding: 1.125em;
  }
  
  a,
  a:visited {
    color: #3498db;
  }
  
  a:hover,
  a:focus,
  a:active {
    color: #2980b9;
  }
  </style>
</head>
<body>
<h1>AWS ECS</h1>
<h3>Table of Contents</h3>
<nav id="TOC">
<ul>
<li><a href="#configuration">Configuration</a><ul>
<li><a href="#item-viewer-configuration">Item Viewer Configuration</a><ul>
<li><a href="#general">General</a></li>
<li><a href="#logging">Logging</a></li>
</ul></li>
<li><a href="#tomcat">Tomcat</a></li>
</ul></li>
<li><a href="#item-viewer-service-manual-setup">Item Viewer Service Manual Setup</a><ul>
<li><a href="#dependencies">Dependencies</a><ul>
<li><a href="#compile-time-dependencies">Compile Time Dependencies</a></li>
<li><a href="#run-time-dependencies">Run Time Dependencies</a></li>
</ul></li>
<li><a href="#configuration-1">Configuration</a></li>
<li><a href="#building-and-running">Building and Running</a><ul>
<li><a href="#building">Building</a></li>
<li><a href="#running">Running</a></li>
</ul></li>
</ul></li>
<li><a href="#configuration-2">Configuration</a><ul>
<li><a href="#item-viewer-configuration-1">Item Viewer Configuration</a><ul>
<li><a href="#general-1">General</a></li>
<li><a href="#logging-2">Logging</a></li>
</ul></li>
<li><a href="#tomcat-1">Tomcat</a></li>
</ul></li>
<li><a href="#item-viewer-service-manual-setup-1">Item Viewer Service Manual Setup</a><ul>
<li><a href="#dependencies-1">Dependencies</a><ul>
<li><a href="#compile-time-dependencies-1">Compile Time Dependencies</a></li>
<li><a href="#run-time-dependencies-1">Run Time Dependencies</a></li>
</ul></li>
<li><a href="#configuration-3">Configuration</a></li>
<li><a href="#building-and-running-1">Building and Running</a><ul>
<li><a href="#building-1">Building</a></li>
<li><a href="#running-1">Running</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
<ul>
<li><a href="#configuration">Configuration</a>
<ul>
<li><a href="#item-viewer-configuration">Item Viewer Configuration</a>
<ul>
<li><a href="#general">General</a></li>
<li><a href="#logging">Logging</a></li>
</ul></li>
<li><a href="#tomcat">Tomcat</a></li>
</ul></li>
<li><a href="#item-viewer-service-manual-setup">Item Viewer Service Manual Setup</a>
<ul>
<li><a href="#dependencies">Dependencies</a>
<ul>
<li><a href="#compile-time-dependencies">Compile Time Dependencies</a></li>
<li><a href="#run-time-dependencies">Run Time Dependencies</a></li>
</ul></li>
<li><a href="#configuration-1">Configuration</a>
<ul>
<li><a href="#dictionary-api">Dictionary API</a></li>
<li><a href="#aws-container-cluster-information-optional">Aws Container Cluster Information (Optional)</a></li>
<li><a href="#logging-1">Logging</a></li>
<li><a href="#local-system">Local System</a></li>
</ul></li>
<li><a href="#building-and-running">Building and Running</a>
<ul>
<li><a href="#building">Building</a></li>
<li><a href="#running">Running</a></li>
</ul></li>
</ul></li>
</ul>
<h1 id="configuration">Configuration</h1>
<h2 id="item-viewer-configuration">Item Viewer Configuration</h2>
<h3 id="general">General</h3>
<p>The Item Viewer Service config file is located in <code>app/src/main/resources/settings-mysql.xml</code> Most of the vlaues are carried over from Iris. The following options must be configured in the settings-mysql.xml config file for the Item Viewer to function correctly. - <code>iris.ContentPath</code> must be set to the location of the content package on the local filesystem. - <code>iris.DictionaryUrl</code> must be set to the url of the <a href="https://github.com/SmarterApp/TDS_Dictionary">dictionary API</a>. - <code>AwsRegion</code> Set this to the AWS region the Ite Viewer is running in if it is running on AWS. - <code>AwsClusterName</code> Set this to the AWS ECS cluster the Item Viewer Service is running in if it is running on AWS ECS.</p>
<h3 id="logging">Logging</h3>
<p>The Item viewer service uses Logback Classic bound to SLF4J for logging. The Logging configuration file is <code>app/src/main/resources/logback.xml</code>. The config file included will log to stdout and <code>/home/tomcat7/itemviewerservice.log</code>. Details for configuring the log output can be found in the loback classic <a href="https://logback.qos.ch/manual/configuration.html">documentation</a>.</p>
<h2 id="tomcat">Tomcat</h2>
<p>The Item Viewer must be run in Apache Tomcat 7 or newer.</p>
<p>In order to run correctly the following Tomcat configuration needs to be set.</p>
<p>Set a 25 character alphanumeric numeric encryption key for Iris in $TOMCAT_HOME/conf/context.xml under the context element. The entry follows the form <code>&lt;Parameter value=&quot;YOUR KEY ENCRYPTION KEY HERE&quot; override=&quot;false&quot; name=&quot;tds.iris.EncryptionKey&quot;/&gt;</code>.</p>
<p>The dictionary API call is made as a cross origin request. A CORS filter must be added to <code>$TOMCAT_HOME/conf/web.xml</code>.</p>
<div class="sourceCode"><pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;filter&gt;</span>
  <span class="kw">&lt;filter-name&gt;</span>CorsFilter<span class="kw">&lt;/filter-name&gt;</span>
  <span class="kw">&lt;filter-class&gt;</span>org.apache.catalina.filters.CorsFilter<span class="kw">&lt;/filter-class&gt;</span>
<span class="kw">&lt;/filter&gt;</span>
<span class="kw">&lt;filter-mapping&gt;</span>
  <span class="kw">&lt;filter-name&gt;</span>CorsFilter<span class="kw">&lt;/filter-name&gt;</span>
  <span class="kw">&lt;url-pattern&gt;</span>/*<span class="kw">&lt;/url-pattern&gt;</span>
<span class="kw">&lt;/filter-mapping&gt;</span></code></pre></div>
<h1 id="item-viewer-service-manual-setup">Item Viewer Service Manual Setup</h1>
<p>To build and run the item viewer service on your local machine you will need the following.</p>
<h2 id="dependencies">Dependencies</h2>
<h3 id="compile-time-dependencies">Compile Time Dependencies</h3>
<p>Compile time dependencies are built into the Maven POM file. Java 7 is required to build and run the Item Viewer Service.</p>
<p>The Item Viewer Service depends on the Iris package of TDS_Student.</p>
<h3 id="run-time-dependencies">Run Time Dependencies</h3>
<ul>
<li>Apache Tomcat 7 or newer</li>
<li>Smarter Balanced Dictionary API access</li>
<li>Read access to the local file system</li>
</ul>
<h2 id="configuration-1">Configuration</h2>
<p>The item viewer service configuration file is located at <code>app/src/main/resources/settings-mysql.xml</code>.</p>
<p>The <code>iris.ContentPath</code> variable in the settings-mysql.xml file needs to be set to the local directory where the content packages are going to be stored. If this directory does not exist, or the application can not access it, it will fail to launch.</p>
<p>Iris requires a 25 character alphanumeric numeric encryption key set as a parameter in $TOMCAT_HOME/conf/context.xml under the context element. The entry follows the form <code>&lt;Parameter value=&quot;YOUR KEY ENCRYPTION KEY HERE&quot; override=&quot;false&quot; name=&quot;tds.iris.EncryptionKey&quot;/&gt;</code>.</p>
<h5 id="dictionary-api">Dictionary API</h5>
<p>In order to use the dictionary you need to set the <code>iris.DictionaryUrl</code> value in the settings-mysql.xml config file for the Iris. The dictionary should be a running instance of the <a href="https://github.com/SmarterApp/TDS_Dictionary">TDS_Dictionary application</a>.</p>
<p>The dictionary API call is made as a cross origin request. A CORS filter needs to be added to the Tomcat $TOMCAT_HOME/conf/web.xml file.</p>
<div class="sourceCode"><pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;filter&gt;</span>
  <span class="kw">&lt;filter-name&gt;</span>CorsFilter<span class="kw">&lt;/filter-name&gt;</span>
  <span class="kw">&lt;filter-class&gt;</span>org.apache.catalina.filters.CorsFilter<span class="kw">&lt;/filter-class&gt;</span>
<span class="kw">&lt;/filter&gt;</span>
<span class="kw">&lt;filter-mapping&gt;</span>
  <span class="kw">&lt;filter-name&gt;</span>CorsFilter<span class="kw">&lt;/filter-name&gt;</span>
  <span class="kw">&lt;url-pattern&gt;</span>/*<span class="kw">&lt;/url-pattern&gt;</span>
<span class="kw">&lt;/filter-mapping&gt;</span></code></pre></div>
<p>Tomcat has detailed <a href="http://tomcat.apache.org/tomcat-8.0-doc/config/filter.html#CORS_Filter">documentation</a> on setting up CORS filtering. Please refer to it if you want to set up a more detailed filter.</p>
<h5 id="aws-container-cluster-information-optional">Aws Container Cluster Information (Optional)</h5>
<p>The “AwsRegion” and “AwsClusterName” keys are used if the application is being run outside of an AWS ERS cluster. If you are running the Item Viewer locally you can ignore these. Please note that the /status url will not work if the Item Viewer is being run outside of an AWS ECS cluster. Use /statusLocal for local diagnostics.</p>
<h4 id="logging-1">Logging</h4>
<p>The item viewer service uses <a href="http://www.slf4j.org/">SLF4J</a> bound to <a href="http://logback.qos.ch/">Logback Classic</a> for logging. The log settings are found in logback.xml. For basic logging to a file you will need to set the file location for the file appender. For a full reference on configuring the log output levels and locations please refer to the Logback Classic <a href="http://logback.qos.ch/manual/configuration.html">documentation</a>.</p>
<h4 id="local-system">Local System</h4>
<p>The application requires read permissions to the Iris content directory specified in settings-mysql.xml.</p>
<h2 id="building-and-running">Building and Running</h2>
<h3 id="building">Building</h3>
<p>To build the item viewer run <code>mvn install</code> in the top level project directory. The compiled WAR file will be generated in <code>app/target/itemviwerservice.war</code>.</p>
<h3 id="running">Running</h3>
<p>Deploy the WAR file to Apache Tomcat by placing the itemviewerservice.war file in your tomcat webapps directory, then starting Tomcat.</p>
<h1 id="configuration-2">Configuration</h1>
<h2 id="item-viewer-configuration-1">Item Viewer Configuration</h2>
<h3 id="general-1">General</h3>
<p>The Item Viewer Service config file is located in <code>app/src/main/resources/settings-mysql.xml</code> Most of the vlaues are carried over from Iris. The following options must be configured in the settings-mysql.xml config file for the Item Viewer to function correctly. - <code>iris.ContentPath</code> must be set to the location of the content package on the local filesystem. - <code>iris.DictionaryUrl</code> must be set to the url of the <a href="https://github.com/SmarterApp/TDS_Dictionary">dictionary API</a>. - <code>AwsRegion</code> Set this to the AWS region the Ite Viewer is running in if it is running on AWS. - <code>AwsClusterName</code> Set this to the AWS ECS cluster the Item Viewer Service is running in if it is running on AWS ECS.</p>
<h3 id="logging-2">Logging</h3>
<p>The Item viewer service uses Logback Classic bound to SLF4J for logging. The Logging configuration file is <code>app/src/main/resources/logback.xml</code>. The config file included will log to stdout and <code>/home/tomcat7/itemviewerservice.log</code>. Details for configuring the log output can be found in the loback classic <a href="https://logback.qos.ch/manual/configuration.html">documentation</a>.</p>
<h2 id="tomcat-1">Tomcat</h2>
<p>The Item Viewer must be run in Apache Tomcat 7 or newer.</p>
<p>In order to run correctly the following Tomcat configuration needs to be set.</p>
<p>Set a 25 character alphanumeric numeric encryption key for Iris in $TOMCAT_HOME/conf/context.xml under the context element. The entry follows the form <code>&lt;Parameter value=&quot;YOUR KEY ENCRYPTION KEY HERE&quot; override=&quot;false&quot; name=&quot;tds.iris.EncryptionKey&quot;/&gt;</code>.</p>
<p>The dictionary API call is made as a cross origin request. A CORS filter must be added to <code>$TOMCAT_HOME/conf/web.xml</code>.</p>
<div class="sourceCode"><pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;filter&gt;</span>
  <span class="kw">&lt;filter-name&gt;</span>CorsFilter<span class="kw">&lt;/filter-name&gt;</span>
  <span class="kw">&lt;filter-class&gt;</span>org.apache.catalina.filters.CorsFilter<span class="kw">&lt;/filter-class&gt;</span>
<span class="kw">&lt;/filter&gt;</span>
<span class="kw">&lt;filter-mapping&gt;</span>
  <span class="kw">&lt;filter-name&gt;</span>CorsFilter<span class="kw">&lt;/filter-name&gt;</span>
  <span class="kw">&lt;url-pattern&gt;</span>/*<span class="kw">&lt;/url-pattern&gt;</span>
<span class="kw">&lt;/filter-mapping&gt;</span></code></pre></div>
<h1 id="item-viewer-service-manual-setup-1">Item Viewer Service Manual Setup</h1>
<p>To build and run the item viewer service on your local machine you will need the following.</p>
<h2 id="dependencies-1">Dependencies</h2>
<h3 id="compile-time-dependencies-1">Compile Time Dependencies</h3>
<p>Compile time dependencies are built into the Maven POM file. Java 7 is required to build and run the Item Viewer Service.</p>
<p>The Item Viewer Service depends on the Iris package of TDS_Student.</p>
<h3 id="run-time-dependencies-1">Run Time Dependencies</h3>
<ul>
<li>Apache Tomcat 7 or newer</li>
<li>Smarter Balanced Dictionary API access</li>
<li>Read access to the local file system</li>
</ul>
<h2 id="configuration-3">Configuration</h2>
<p>The item viewer service configuration file is located at <code>app/src/main/resources/settings-mysql.xml</code>.</p>
<p>The <code>iris.ContentPath</code> variable in the settings-mysql.xml file needs to be set to the local directory where the content packages are going to be stored. If this directory does not exist, or the application can not access it, it will fail to launch.</p>
<p>Iris requires a 25 character alphanumeric numeric encryption key set as a parameter in $TOMCAT_HOME/conf/context.xml under the context element. The entry follows the form <code>&lt;Parameter value=&quot;YOUR KEY ENCRYPTION KEY HERE&quot; override=&quot;false&quot; name=&quot;tds.iris.EncryptionKey&quot;/&gt;</code>.</p>
<h5 id="dictionary-api-1">Dictionary API</h5>
<p>In order to use the dictionary you need to set the <code>iris.DictionaryUrl</code> value in the settings-mysql.xml config file for the Iris. The dictionary should be a running instance of the <a href="https://github.com/SmarterApp/TDS_Dictionary">TDS_Dictionary application</a>.</p>
<p>The dictionary API call is made as a cross origin request. A CORS filter needs to be added to the Tomcat $TOMCAT_HOME/conf/web.xml file.</p>
<div class="sourceCode"><pre class="sourceCode xml"><code class="sourceCode xml"><span class="kw">&lt;filter&gt;</span>
  <span class="kw">&lt;filter-name&gt;</span>CorsFilter<span class="kw">&lt;/filter-name&gt;</span>
  <span class="kw">&lt;filter-class&gt;</span>org.apache.catalina.filters.CorsFilter<span class="kw">&lt;/filter-class&gt;</span>
<span class="kw">&lt;/filter&gt;</span>
<span class="kw">&lt;filter-mapping&gt;</span>
  <span class="kw">&lt;filter-name&gt;</span>CorsFilter<span class="kw">&lt;/filter-name&gt;</span>
  <span class="kw">&lt;url-pattern&gt;</span>/*<span class="kw">&lt;/url-pattern&gt;</span>
<span class="kw">&lt;/filter-mapping&gt;</span></code></pre></div>
<p>Tomcat has detailed <a href="http://tomcat.apache.org/tomcat-8.0-doc/config/filter.html#CORS_Filter">documentation</a> on setting up CORS filtering. Please refer to it if you want to set up a more detailed filter.</p>
<h5 id="aws-container-cluster-information-optional-1">Aws Container Cluster Information (Optional)</h5>
<p>The “AwsRegion” and “AwsClusterName” keys are used if the application is being run outside of an AWS ERS cluster. If you are running the Item Viewer locally you can ignore these. Please note that the /status url will not work if the Item Viewer is being run outside of an AWS ECS cluster. Use /statusLocal for local diagnostics.</p>
<h4 id="logging-3">Logging</h4>
<p>The item viewer service uses <a href="http://www.slf4j.org/">SLF4J</a> bound to <a href="http://logback.qos.ch/">Logback Classic</a> for logging. The log settings are found in logback.xml. For basic logging to a file you will need to set the file location for the file appender. For a full reference on configuring the log output levels and locations please refer to the Logback Classic <a href="http://logback.qos.ch/manual/configuration.html">documentation</a>.</p>
<h4 id="local-system-1">Local System</h4>
<p>The application requires read permissions to the Iris content directory specified in settings-mysql.xml.</p>
<h2 id="building-and-running-1">Building and Running</h2>
<h3 id="building-1">Building</h3>
<p>To build the item viewer run <code>mvn install</code> in the top level project directory. The compiled WAR file will be generated in <code>app/target/itemviwerservice.war</code>.</p>
<h3 id="running-1">Running</h3>
<p>Deploy the WAR file to Apache Tomcat by placing the itemviewerservice.war file in your tomcat webapps directory, then starting Tomcat.</p>
</body>
</html>